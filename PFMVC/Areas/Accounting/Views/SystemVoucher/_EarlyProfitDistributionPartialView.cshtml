@{
    ViewBag.Title = "_EarlyProfitDistributionPartialView";
}
<fieldset>
<legend id="voucherType">Early Profit Distribution Voucher</legend>
<div>
    <table class="table table-condensed">
        <tbody>
            <tr>
                <td class="a">
                    <label for="Voucher_No">Voucher No</label>
                </td>
                <td class="a">
                    <input id="VoucherNo" class="form-control input-sm tooltip_test" type="text" value="New" title="" style="font-weight: bold; color: blue," readonly="readonly" name="Journal Voucher No" data-original-title="Voucher number will be auto created on save."/>
                </td>

                <td>
                    <div class="form-inline">
                        <div class="pull-right">
                            <label for="Transaction_Date">Transaction Date</label>
                            <input id="TransactionDate" class="form-control input-sm dateTimePickerNoFuture" type="text" value="3/4/2014 4:06:35 PM" readonly="readonly" name="TransactionDate" data-val-required="The DateTime field is required." data-val-date="The field DateTime must be a date." data-val="true"/>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <table id="VoucherTable" class="table table-striped table-condensed">
        <tbody>
            <tr style="text-align: center; font-weight: bold">
                <td style="width: 35px; vertical-align: middle !important"></td>
                <td>Head of Account</td>
                <td style="width: 150px">Chq./Desc.</td>
                <td style="width: 100px">Debit</td>
                <td style="width: 100px">Credit</td>
            </tr>
            <tr>
                <td>
                    <input id="inputType" class="btn-xs btn-info next inputType" type="button" name="input_type" value="Dr."/>
                </td>
                <td class="readOnly">
                    <input id="LedgerName" class="form-control next accountHead clearable" type="text" value="Early Profit Distribution" readonly="readonly" name="LedgerName" />
                    <input id="LedgerID" type="hidden" value="" name="LedgerID"/>
                </td>
                <td>
                    <input id="ChequeNumber" class="form-control next" type="text" value="" placeholder="" name="ChequeNumber"/>
                </td>
                <td>
                    <input id="Debit" class="form-control next NumOnly debit lastcell" type="text" value="" name="Debit" onkeyup="getCretit();"/>
                </td>
                <td>
                    <input id="Credit" class="form-control next NumOnly credit lastcell" type="text" value="" name="Credit" readonly="readonly" />
                </td>
            </tr>
            <tr>
                <td>
                    <input id="inputType-1" class="btn-xs btn-info next inputType" type="button" name="input_type" value="Cr." />
                </td>
                <td class="readOnly">
                    <input id="LedgerName1" class="form-control next accountHead clearable" type="text" readonly="readonly" value="Member Found" name="LedgerName" />
                    <input id="LedgerID1" type="hidden" value="" name="LedgerID"/>
                </td>
                <td>
                    <input id="ChequeNumber1" class="form-control next" type="text" value="" placeholder="" name="ChequeNumber" readonly="readonly" />
                </td>
                <td>
                    <input id="Debit1" class="form-control next NumOnly debit lastcell" type="text" value="" name="Debit" readonly="readonly" />
                </td>
                <td>
                    <input id="Credit1" class="form-control next NumOnly credit lastcell" type="text" value="" name="Credit" readonly="readonly" />
                </td>
            </tr>
        </tbody>
    </table>
    <label style="color: lightsteelblue; font-style: italic">Press ENTER to move on NEXT</label>
@*    <label id="result_credit" class="pull-right" style="min-width: 100px; text-align: center; color: grey">0/=</label>
    <label id="result_debit" class="pull-right" style="min-width: 100px; text-align: center; padding-top: -10px; color: grey">0/=</label>*@
    <input id="Narration" class="form-control next" type="text" name="Narration" style="width: 100%" placeholder="Narration of the Journal voucher..." />
    <br/>
    <table class="table table-striped table-bordered" style="font-weight: bold">
        <tbody>
            <tr>
                <td>Employee ID</td>
                <td>
                    <input id="searchTerm" class="form-control ui-autocomplete-input" type="text" name="txtEmpID" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true" />
                    <input id="SelectedEmpID" type="hidden" name="SelectedEmpID"/>
                </td>
            </tr>
        </tbody>
    </table>
    <div id="EmployeeDetail">
        <table id="VoucherTables" class="table table-striped table-condensed">
            <tbody>
                <tr style="text-align: center; font-weight: bold">
                    <td style="width:10%">Emp Id</td>
                    <td style="width:60%">Emp Name</td>
                    <td style="width:10%">OC</td>
                    <td style="width:10%">EC</td>
                    <td style="width: 10%">Profit</td>
                </tr>
                <tr>
                    <td class="readOnly">
                        <input id="Id"  type="text" style="width:100%" readonly="readonly"/>
                    </td>
                    <td>
                        <input id="EmpName" type="text" style="width: 100%" readonly="readonly" />
                    </td>
                    <td>
                        <input id="OC" type="text" readonly="readonly" />
                    </td>
                    <td>
                        <input id="EC" type="text" readonly="readonly" />
                    </td>
                    <td>
                        <input id="Profit" type="text" readonly="readonly" />
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
    <button id="switchOptionDiv" class="btn btn-info tooltip_test" title="" data-placement="bottom" data-toggle="tooltip" onclick="SwitchOptionDiv()" type="button" data-original-title="Switch: Account Head & Journal Voucher List">
        <span class="glyphicon glyphicon-align-justify"></span>
    </button>
    <button id="save_btn" class="btn btn-success pull-right 3 next" onclick="save();" type="button">
        <span class="glyphicon glyphicon-saved"></span>
        Save
    </button>
</div>
</fieldset>


<script type="text/javascript">
     function getCretit()
    {
        $( "#Credit1" ).val( $( "#Debit" ).val() );
        $( "#result_credit" ).val( $( "#Credit1" ).val() );
        $( "#result_debit" ).val( $( "#Credit1" ).val() );
        $("#Profit").val($("#Debit").val());
    }

    $( function (){
        $("#searchTerm").autocomplete( {
            source: rootPath + "/PFSettings/MemberPFStatus/AutocompleteSuggestions",
            minLength: 1,
            select: function ( event, ui )
            {
                $( 'input[name="txtEmpID"]' ).val( ui.item.label );
                $( 'input[name="SelectedEmpID"]' ).val( ui.item.value );
                GetEmployeeDetail()
                return false;
            }
        } );
    } );

    function GetEmployeeDetail(){
        var id = $("#SelectedEmpID").val();
        debugger;
        alert(id);
        debugger;
        $.ajax({  
            url: rootPath + '/Accounting/SystemVoucher/GetEmployee/?voucherType=' + id,
            type:'post',  
            dataType: 'json',
            data: { id: id },
            success: function(data) {  
                    $( "#Id" ).val( data.IdentificationNumber );
                    $( "#EmpName" ).val( data.EmpName );
                    $( "#OC" ).val( data.OwnCont );
                    $( "#EC" ).val( data.OwnCont );
            }  
       }); 
    }

    function save(){
        var chequeNumber = $( "#ChequeNumber" ).val();
        var debit = $( "#Debit" ).val();
        var searchTerm = $( "#SelectedEmpID" ).val();
        if ( $( "#searchTerm" ).val() != "" && $( "#debit" ) != "" )
        {
            $.ajax( {
                url: rootPath + '/Accounting/SystemVoucher/Save',
                type: 'post',
                dataType: 'json',
                data: { debit: debit, empId: searchTerm, chequeNumber: chequeNumber },
                success: function ( data )
                {
                   alert( data );
                }
            } );
        } else{
            alert( "Pl's select employee & fill profit" )
            return;
        }
    }
</script>
   
